{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "At present, toxcore consume too much energy when udp is used.\r\n\r\nThe reason is that net_crypto send 0x10(ping/alive) and 0x01 message all the time.\r\nThe 0x10 is sent once every 8 seconds. And if it is not received in FRIEND_CONNECTION_TIMEOUT(32seconds), the connection will be disconnected.\r\n\r\nIn order to save energe, I suggest friend_con->ping_lastrecv should also be update upon any message received, at least be updated upon 0x01 message is received. 0x10(ping) should not be sent before channel idle for enough time. And whenever 0x10 is sent, 0x01 can be sent instead.\r\n\r\n0x01 can serve as ping, so 0x10 is indeed not needed. For smooth transition, update friend_con->ping_lastrecv upon any message received. Then next phase, remove or reduce the sending of 0x10(ping). I mean for this change, the first phase is not to require 0x10(ping) to be received that often.\r\n\r\nBe noted that if you have 100 friends, then every 8 seconds, 100 0x10 messages should be received.\r\n\r\nBy this way, many message sending will be removed, and energy consumption will be much lower.\r\n\r\nJack",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/1111/comments",
    "created_at": "2018-08-22T15:20:32Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-08-26T16:30:32Z",
            "event": "milestoned",
            "id": 1809411821,
            "milestone": {
                "title": "v0.2.x"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDE4MDk0MTE4MjE=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events/1809411821"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-04-27T23:36:34Z",
            "event": "labeled",
            "id": 3277995594,
            "label": {
                "color": "eeeeee",
                "name": "P3"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDMyNzc5OTU1OTQ=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events/3277995594"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-02-04T20:01:08Z",
            "event": "renamed",
            "id": 6011743784,
            "node_id": "RTE_lADOA7zIGs4VCmcPzwAAAAFmU-4o",
            "performed_via_github_app": null,
            "rename": {
                "from": "To save energy",
                "to": "Reduce the use of DHT pings when GetNodes packets are sent"
            },
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events/6011743784"
        }
    ],
    "events_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/1111/events",
    "html_url": "https://github.com/TokTok/c-toxcore/issues/1111",
    "id": 353003279,
    "labels": [
        {
            "color": "eeeeee",
            "default": false,
            "description": "Low priority",
            "id": 406490432,
            "name": "P3",
            "node_id": "MDU6TGFiZWw0MDY0OTA0MzI=",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/labels/P3"
        }
    ],
    "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/1111/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 0,
        "created_at": "2018-03-09T13:13:48Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf"
        },
        "description": "Placeholder for the next 0.2.x version.",
        "due_on": null,
        "html_url": "https://github.com/TokTok/c-toxcore/milestone/28",
        "id": 3174131,
        "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/28/labels",
        "node_id": "MDk6TWlsZXN0b25lMzE3NDEzMQ==",
        "number": 28,
        "open_issues": 124,
        "state": "open",
        "title": "v0.2.x",
        "updated_at": "2024-02-21T10:27:33Z",
        "url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/28"
    },
    "node_id": "MDU6SXNzdWUzNTMwMDMyNzk=",
    "number": 1111,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/1111/reactions"
    },
    "repository_url": "https://api.github.com/repos/TokTok/c-toxcore",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/1111/timeline",
    "title": "Reduce the use of DHT pings when GetNodes packets are sent",
    "updated_at": "2022-02-04T20:01:08Z",
    "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/1111",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/16816680?v=4",
        "events_url": "https://api.github.com/users/jackzhp/events{/privacy}",
        "followers_url": "https://api.github.com/users/jackzhp/followers",
        "following_url": "https://api.github.com/users/jackzhp/following{/other_user}",
        "gists_url": "https://api.github.com/users/jackzhp/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jackzhp",
        "id": 16816680,
        "login": "jackzhp",
        "node_id": "MDQ6VXNlcjE2ODE2Njgw",
        "organizations_url": "https://api.github.com/users/jackzhp/orgs",
        "received_events_url": "https://api.github.com/users/jackzhp/received_events",
        "repos_url": "https://api.github.com/users/jackzhp/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jackzhp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jackzhp/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jackzhp"
    }
}